import axios from 'axios';
import BotRequest from './botRequest';
import BotResponse from './botResponse';
export default class Gateway {
    constructor(gatewayUrl, serviceId) {
        this.serviceId = 'GenericBot';
        this.query = async (message) => {
            message.computeValues(this.serviceId);
            const response = await axios.post('/message', message.payload);
            return Gateway.parseResponse(response.data);
        };
        axios.defaults.baseURL = gatewayUrl || 'http://localhost:3000';
        this.serviceId = serviceId ?? this.serviceId;
        BotRequest.serviceId = this.serviceId;
    }
    static parseResponse(jsonResponse) {
        return Object.assign(new BotResponse(), jsonResponse);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2F0ZXdheS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9saWIvZ2F0ZXdheS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssTUFBTSxPQUFPLENBQUM7QUFFMUIsT0FBTyxVQUFVLE1BQU0sY0FBYyxDQUFDO0FBQ3RDLE9BQU8sV0FBVyxNQUFNLGVBQWUsQ0FBQztBQUV4QyxNQUFNLENBQUMsT0FBTyxPQUFPLE9BQU87SUFHMUIsWUFBWSxVQUFtQixFQUFFLFNBQWtCO1FBRjNDLGNBQVMsR0FBRyxZQUFZLENBQUM7UUFReEIsVUFBSyxHQUFHLEtBQUssRUFBRSxPQUFtQixFQUF3QixFQUFFO1lBQ25FLE9BQU8sQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQ3RDLE1BQU0sUUFBUSxHQUFHLE1BQU0sS0FBSyxDQUFDLElBQUksQ0FBQyxVQUFVLEVBQUUsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQy9ELE9BQU8sT0FBTyxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDOUMsQ0FBQyxDQUFDO1FBVEEsS0FBSyxDQUFDLFFBQVEsQ0FBQyxPQUFPLEdBQUcsVUFBVSxJQUFJLHVCQUF1QixDQUFDO1FBQy9ELElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxJQUFJLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDN0MsVUFBVSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDO0lBQ3hDLENBQUM7SUFRTyxNQUFNLENBQUMsYUFBYSxDQUFDLFlBQXFCO1FBQ2hELE9BQU8sTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLFdBQVcsRUFBRSxFQUFFLFlBQVksQ0FBQyxDQUFDO0lBQ3hELENBQUM7Q0FDRiJ9